
*** CONFIGURATION OF PATHS ***

Press Shift twice (â‡§â‡§) to open the Search Everywhere box

Type: Edit Configurations

Click the result: Run > Edit Configurationsâ€¦
â†’ That will open the correct Run/Debug Configuration window

Click the + in the top-left corner of that window

Choose â†’ Python
(Python, Bash, Compound, Docker, etc.)

Fill out the fields like:

Field	             What to put
Name	             ZoundZcope AI
Script path	         Click the folder icon and choose main.py from your backend/ folder
Working directory    Click the folder icon and choose the backend/ folder itself
Python interpreter   Select your virtual environment (venv or conda, if not set already)

Hit OK and press the â–¶ï¸ play button.

âœ… Script: main.py â€” correct
âœ… Working dir: /backend â€” correct
âœ… Environment var (optional): fine
âœ… Python interpreter: âœ… already set correctly (shows at the top)

âž• Bonus Tip
If you ever want to change the interpreter,
just click the gear icon next to the Python path and choose from:
System Python
Any virtualenv
Create a new one



*** MULTIPART ***

pip install python-multipart
-- necessary step for the /upload route to work properly.

Itâ€™s a small Python library that enables FastAPI to handle file uploads
sent via multipart/form-data, which is the encoding format used
when forms send files (like WAVs or images) from your frontend or tools like Postman.

@router.post("/")
def upload_audio(
    file: UploadFile = File(...),
    session_id: int = Form(...),
    track_name: str = Form(...),
    ...
)

You're accepting:
A file (via UploadFile)
Some form fields (like track_name, session_id)
These together require multipart form handling.
FastAPI uses Starlette under the hood, and Starlette needs python-multipart
to parse those kinds of requests.

âœ… In Short:
Item	            Purpose
python-multipart	Enables FastAPI to parse file upload forms
Required for	    UploadFile, Form(...), File(...)
Not needed for	    JSON-only APIs (e.g., application/json)



*** UVICORN ***
ðŸ§  Why Pros Use uvicorn main:app --reload
Reason	                      Benefit
âœ… Separation of concerns	  Keeps main.py clean â€” just defines the app, doesn't launch it
ðŸš€ Production-ready	          run main.py in production â€” deploy with uvicorn or gunicorn -k uvicorn.workers.UvicornWorker
â™»ï¸ Hot reload support	      The --reload flag gives fast reloads during dev â€” no need to restart
ðŸ§ª Better for testing	      Re-using the app object is easier when it's not tied to launch logic
âš™ï¸ Works with ASGI servers	  uvicorn is a fully ASGI-compatible server â€” crucial for FastAPI apps

ðŸ†š Comparison
Approach	                Used byâ€¦	                        Typical inâ€¦
uvicorn.run() in main.py	Beginners, small scripts	        Quick demos or when using PyCharm without config
uvicorn main:app --reload	Professionals, production setups	Real apps, clean architecture, Docker deployments


Professional appearance
Cleaner and more scalable code
Easier deployment later

âž¡ï¸ Switch to using  from your run config and remove uvicorn.run() from main.py completely.



*** SETUP UVICORN ***

pip install uvicorn
pip install fastapi uvicorn

Update Your Run Configuration in PyCharm

Go to Run â†’ Edit Configurations...

Click the + in the top left

Choose Python

Then fill out the fields like this:

Field	                     Value
Name	                     ZoundZscope_AI (uvicorn)
Module name (not script!)    uvicorn
Parameters	                 main:app --reload
Working directory	         Set this to your backend/ folder
Python interpreter	         Use your virtual environment (already selected for you)

for example:
[Python interpreter]: /your/venv/bin/python
Module name: uvicorn
Parameters: main:app --reload
Working directory: /Users/martinenke/ZoundZscope_AI/backend

Hit Apply, then OK

Run It ðŸŽ‰
In the top-right dropdown, select ZoundZscope (uvicorn)

Click â–¶ï¸
Open your browser and go to http://127.0.0.1:8000
Or test via http://127.0.0.1:8000/docs to access Swagger UI


--->
âœ… clean, professional FastAPI project setup
âœ… A working Run Configuration using uvicorn
âœ… Proper dependency management
âœ… Swagger UI live at localhost:8000/docs
âœ… Ready to build and test your upload + GPT routes like a pro



ðŸ”¸ "sender" in chat_history
Purpose: Tracks who sent the message in a session's chat.

Expected values:

"user" â€“ if the message was a follow-up question from the user.

"assistant" or "ai" â€“ if the message was generated by the AI.

Why itâ€™s useful:

You can clearly separate user input from AI responses.

Enables chat-style UI or logs (like ChatGPT-style history).

Helpful for future context-aware threading if you implement advanced conversation flows.